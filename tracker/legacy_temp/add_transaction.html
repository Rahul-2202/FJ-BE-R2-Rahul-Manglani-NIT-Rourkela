<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h2>Add Transaction</h2>
    <form method="post">
      {% csrf_token %} {{ form.as_p }}
      <button type="submit">Save</button>
    </form>
    <a href="{% url 'transaction_list' %}">Back to Transaction List</a>
  </body>
</html>
<!-- {% block content %}
<h2>Add Transaction</h2>
<form method="post">
  {% csrf_token %}
  <div class="input-group">
    <label for="id_date">Date:</label>
    {{ form.date }}
  </div>
  <div class="input-group">
    <label for="id_amount">Amount:</label>
    {{ form.amount }}
  </div>
  <div class="input-group">
    <label for="id_description">Description:</label>
    {{ form.description }}
  </div>
  <div class="input-group">
    <label for="id_category">Category:</label>
    <select name="category" id="id_category">
      <option value="" selected>Select an existing category</option>
      {% for category in form.category.field.queryset %}
      <option value="{{ category.pk }}">{{ category.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="input-group" id="newCategoryInput" style="display: none">
    <label for="id_new_category">New Category:</label>
    <input
      type="text"
      name="new_category"
      id="id_new_category"
      maxlength="100"
    />
  </div>
  <button type="button" id="addNewCategory">Add New Category</button>
  <button type="submit">Add Transaction</button>
</form>

<script>
  const categorySelect = document.querySelector("#id_category");
  const newCategoryInput = document.querySelector("#newCategoryInput");
  const addNewCategoryButton = document.querySelector("#addNewCategory");

  categorySelect.addEventListener("change", () => {
    if (categorySelect.value === "") {
      newCategoryInput.style.display = "block";
    } else {
      newCategoryInput.style.display = "none";
    }
  });

  addNewCategoryButton.addEventListener("click", () => {
    newCategoryInput.style.display = "block";
  });
</script>
{% endblock %} -->
